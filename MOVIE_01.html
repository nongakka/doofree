<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏´‡∏£‡∏£‡∏°‡∏ô‡πâ‡∏≠‡∏¢ ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</title>

<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>
<script src="https://ssl.p.jwpcdn.com/player/v/8.26.0/jwplayer.js"></script>
<script>jwplayer.key="XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";</script>

<style>
:root{
--bg:#0f0f0f;
--card:#1b1b1b;
--accent:#f5c518;
}
*{box-sizing:border-box}
body{
margin:0;
font-family:'Kanit',sans-serif;
background:#0b0b0b;
color:#fff;
display:flex;
}
.sidebar{
width:280px;
background:#0f0f0f;
height:100vh;
padding:20px;
position:fixed;
left:0;
top:0;
border-right:1px solid #222;
overflow-y:auto;
}
.sidebar-section{
margin-bottom:25px;
padding-bottom:15px;
border-bottom:1px solid #1f1f1f;
}
.sidebar-section:last-child{border-bottom:none;}
.sidebar h2{color:var(--accent);margin-bottom:15px;font-weight:600;}
.sidebar h3{font-size:14px;margin-bottom:10px;color:#aaa;text-transform:uppercase;letter-spacing:.5px;}
.sidebar input{
width:100%;margin-bottom:8px;padding:8px;
background:#1c1c1c;border:1px solid #222;
color:#fff;border-radius:6px;
}
.sidebar ul{list-style:none;padding:0;margin:0;}
.sidebar li{
padding:8px;border-radius:6px;cursor:pointer;font-size:13px;
}
.sidebar li:hover,
.sidebar li.active{background:#222;}

.main{
margin-left:280px;
padding:30px;
width:100%;
overflow-y:auto;
height:100vh;
}
.movie-grid{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(200px,1fr));
gap:25px;
}
.movie-card{
background:var(--card);
border-radius:12px;
overflow:hidden;
cursor:pointer;
transition:.3s;
}
.movie-card img{
width:100%;height:300px;object-fit:cover;
}
.movie-card:hover{
transform:translateY(-6px);
box-shadow:0 20px 40px rgba(0,0,0,.6);
}
.movie-title{padding:10px;font-size:14px}

#overlay{
position:fixed;top:0;left:0;width:100%;height:100%;
background:rgba(0,0,0,.8);
opacity:0;pointer-events:none;
transition:.3s;z-index:50;
}
#overlay.active{opacity:1;pointer-events:auto}

#player-container{
position:fixed;top:50%;left:50%;
transform:translate(-50%,-50%) scale(.9);
width:80%;max-width:1100px;height:75vh;
background:#000;border-radius:16px;
overflow:hidden;
opacity:0;pointer-events:none;
transition:.3s;z-index:60;
}
#player-container.active{
opacity:1;
transform:translate(-50%,-50%) scale(1);
pointer-events:auto;
}
video,#jw-player{width:100%;height:100%}
</style>
</head>

<body>

<div class="sidebar">
<div class="sidebar-section">
<h2>‡∏´‡∏£‡∏£‡∏°‡∏ô‡πâ‡∏≠‡∏¢ ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</h2>
</div>

<div class="sidebar-section">
<h3>üîé ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</h3>
<input type="text" id="searchInput" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏≠‡∏á...">
</div>

<div class="sidebar-section">
<h3>üìÅ ‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</h3>
<ul id="categoryList"></ul>
</div>
</div>

<div class="main">
<div class="movie-grid" id="movieGrid"></div>
</div>

<div id="overlay"></div>

<div id="player-container">
<video id="videoPlayer" controls playsinline></video>
<div id="jw-player" style="display:none;"></div>
</div>

<script>

/* ==================================
   üî• ‡πÉ‡∏™‡πà URL Playlist ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
   ================================== */
const PLAYLIST_URL = "https://dl.dropbox.com/scl/fi/m5760pdhxan80howr2sye/.m3u?rlkey=tfwglsw9fd7cx0q0vedaur3l8&dl=1";

/* ================================== */

let allChannels=[];
let currentCategory="‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î";
let hls=null;
let dashPlayer=null;
let jwInstance=null;

const grid=document.getElementById("movieGrid");
const categoryList=document.getElementById("categoryList");
const video=document.getElementById("videoPlayer");
const overlay=document.getElementById("overlay");
const playerContainer=document.getElementById("player-container");

/* LOAD PLAYLIST */
async function loadPlaylist(){
try{
const res=await fetch(PLAYLIST_URL+"?t="+Date.now());
const text=await res.text();
parseM3U(text);
}catch{
alert("‡πÇ‡∏´‡∏•‡∏î Playlist ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‚ùå");
}
}

/* PARSE M3U */
function parseM3U(data){
let channels=[];
const lines=data.split(/\r?\n/);
let current=null;

lines.forEach(line=>{
line=line.trim();

if(line.startsWith("#EXTINF")){
const title=line.substring(line.lastIndexOf(",")+1).trim()||"‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏ä‡∏∑‡πà‡∏≠";
const group=(line.match(/group-title="(.*?)"/)||[])[1]||"‡∏≠‡∏∑‡πà‡∏ô‡πÜ";
const logo=(line.match(/tvg-logo="(.*?)"/)||[])[1]||"";
current={title,group,logo};
}
else if(line && !line.startsWith("#") && current){
current.url=line;
channels.push(current);
current=null;
}
});

allChannels=channels;
buildCategories();
renderGrid();
}

/* CATEGORY */
function buildCategories(){
const groups=["‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î",...new Set(allChannels.map(c=>c.group))];
categoryList.innerHTML="";
groups.forEach((g,i)=>{
const li=document.createElement("li");
li.textContent=g;
if(i===0) li.classList.add("active");

li.onclick=()=>{
categoryList.querySelectorAll("li")
.forEach(el=>el.classList.remove("active"));
li.classList.add("active");
currentCategory=g;
renderGrid();
};
categoryList.appendChild(li);
});
}

/* SEARCH */
document.getElementById("searchInput")
.addEventListener("input",renderGrid);

/* GRID */
function renderGrid(){
grid.innerHTML="";
const keyword=document.getElementById("searchInput").value.toLowerCase();

const filtered=allChannels.filter(c=>{
return (currentCategory==="‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"||c.group===currentCategory)
&& c.title.toLowerCase().includes(keyword);
});

filtered.forEach(ch=>{
const card=document.createElement("div");
card.className="movie-card";
card.innerHTML=`
<img loading="lazy" src="${ch.logo||'https://via.placeholder.com/300x450?text=No+Image'}">
<div class="movie-title">${ch.title}</div>`;
card.onclick=()=>playStream(ch);
grid.appendChild(card);
});
}

/* RESET PLAYER */
function resetPlayers(){
if(hls){hls.destroy();hls=null;}
if(dashPlayer){dashPlayer.reset();dashPlayer=null;}
if(jwInstance){jwInstance.remove();jwInstance=null;}
video.pause();
video.removeAttribute("src");
video.load();
document.getElementById("jw-player").style.display="none";
video.style.display="block";
}

/* PLAY */
function playStream(channel){
overlay.classList.add("active");
playerContainer.classList.add("active");
resetPlayers();

const url=channel.url.toLowerCase();

if(url.includes(".m3u8")){
if(video.canPlayType("application/vnd.apple.mpegurl")){
video.src=channel.url;
video.play();
}else if(Hls.isSupported()){
hls=new Hls();
hls.loadSource(channel.url);
hls.attachMedia(video);
hls.on(Hls.Events.MANIFEST_PARSED,()=>video.play());
}
}
else if(url.includes(".mpd")){
dashPlayer=dashjs.MediaPlayer().create();
dashPlayer.initialize(video,channel.url,true);
}
else{
video.style.display="none";
document.getElementById("jw-player").style.display="block";
jwInstance=jwplayer("jw-player").setup({
file:channel.url,
width:"100%",
height:"100%",
autostart:true
});
}
}

/* CLOSE */
overlay.onclick=()=>{
overlay.classList.remove("active");
playerContainer.classList.remove("active");
resetPlayers();
};

/* START AUTO LOAD */
loadPlaylist();

</script>

</body>
</html>